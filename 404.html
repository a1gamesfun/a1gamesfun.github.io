
<script>

    var suburl = window.location.pathname;

    //console.log(suburl)

    async function loadGamePage() {

        let fetchfail = false;

        // fetch the json game info file
        fetch(`https://a1games.fun/games/${suburl}/gameinfo.json`)
            .then((response) => response.json())
            // if conversion failed:
            .catch((error) => {
                window.location = "https://a1games.fun/";
                // return doesn't work so i just set a bool instead
                fetchfailed = true;
            })
            // if we didnt get an error:
            .then((jsonresponse) =>  {

                if (!fetchfailed)
                {
                    localStorage.setItem("SelectedGame", JSON.stringify(jsonresponse));

                    window.location.href = jsonresponse["href"];
                }

            });

    }

    loadGamePage();

</script>
